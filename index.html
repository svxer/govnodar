<!DOCTYPE html>
<html lang="ru">
<head>
	<meta charset="UTF-8">
	<title>stupid slime image</title>
	<link rel="icon" href="./index_files/stupid slime image.png" type="image/x-icon">
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Google+Sans:ital,opsz,wght@0,17..18,400..700;1,17..18,400..700&display=swap" rel="stylesheet">
	<style>
		body {
			background-color: black;
			color: white;
			overflow: hidden;
			font-family: 'Google Sans', 'Roboto', Arial, sans-serif;
			margin:0;
			user-select: none;
		}
		.hue-anim { animation: hue-rotate 3s linear infinite; filter: hue-rotate(0deg); }
		@keyframes hue-rotate { from { filter: hue-rotate(0deg); } to { filter: hue-rotate(360deg); } }

		#slime {
			display: block;
			margin: 0 auto;
			max-width: 90%;
			height: 75vh;
			cursor: pointer;
			-webkit-tap-highlight-color: transparent;
			transition: transform 0.2s ease-out;
			user-select: none;
			transform: translateY(-45px);
		}

		#text-container {
			position: absolute;
			left: 50%;
			transform: translateX(-50%);
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: center;
			pointer-events: none;
		}

		#date {
			font-size: 2rem;
			font-weight: 500;
			color: white;
			margin: 0;
		}
		#clock {
			font-size: 4rem;
			font-weight: 600;
			font-variant-numeric: tabular-nums;
			font-feature-settings: "tnum" 1;
			margin: 0;
		}
		#counter {
			font-size: 1.5rem;
			font-weight: 500;
			font-variant-numeric: tabular-nums;
			font-feature-settings: "tnum" 1;
			color:white;
			margin: 0;
			opacity:0;
			transition: opacity 0.5s ease, transform 0.3s ease-out;
		}

		#menu {
			position: fixed;
			bottom: -120px;
			left: 50%;
			transform: translateX(-50%);
			background: rgba(255,255,255,0.06);
			backdrop-filter: blur(10px);
			padding: 14px 18px;
			border-radius: 14px;
			display: flex;
			gap: 14px;
			align-items: center;
			transition: bottom 0.5s ease, opacity 0.5s ease;
			opacity:0;
		}
		#menu.show { bottom:20px; opacity:1; }

		#menu button, #menu label {
			background: none;
			color: white;
			border-radius: 10px;
			padding: 6px 12px;
			font-size: 0.9rem;
			cursor: pointer;
			display: flex;
			align-items: center;
			justify-content: center;
			position: relative;
			border:1px solid #525252;
			transition: border-color 0.25s ease, transform 0.15s ease, background-color 0.25s ease, color 0.15s ease;
		}
		#menu button:hover { transform: scale(1.05); }
		#menu button:active, #menu label:active { transform: scale(0.95); }

		#menu button#reset, #menu button#close { border-color: #525252; }
		#menu button#reset:hover { border-color: #ff5a52; }
		#menu button#close:hover { border-color: #e7c039; }

		#menu .tooltip {
			position:absolute;
			bottom:120%;
			left:50%;
			transform: translateX(-50%);
			background:#ed5e68;
			color:white;
			font-size:0.8rem;
			font-family:'Google Sans', 'Roboto', Arial, sans-serif;
			padding:2px 6px;
			border-radius:6px;
			opacity:0;
			pointer-events:none;
			transition: opacity 0.25s ease;
		}
		#menu .tooltip.show { opacity:1; }

		#menu input { accent-color: white; margin-left:6px; border:1px solid #525252; border-radius:4px; transition:border-color 0.25s ease; }
		#menu input:hover { border-color:#ccc; }

		.plusone {
			position:absolute;
			color:white;
			font-size:2rem;
			font-weight:600;
			animation: plusone-move 1s forwards;
			pointer-events:none;
			user-select:none;
		}
		@keyframes plusone-move {
			0% { transform: translate(-50%,0) scale(1); opacity:1; }
			50% { transform: translate(-50%,-30px) scale(1.3); opacity:1; }
			100% { transform: translate(-50%,-60px) scale(1); opacity:0; }
		}

		.shake { animation: shake 0.3s infinite; }
		@keyframes shake {
			0%,100%{ transform: translateX(0); }
			25%{ transform: translateX(-2px); }
			50%{ transform: translateX(2px); }
			75%{ transform: translateX(-2px); }
		}

		#explosion-gif {
			position:absolute;
			pointer-events:none;
			display:none;
			z-index:9999;
			transform: translateX(-50%);
			object-fit: contain;
		}
	</style>
</head>
<body>
	<img id="slime" src="./index_files/stupid slime image.png" alt="stupid slime" aria-pressed="false" draggable="false" title="click to interact">
	
	<div id="text-container">
		<div id="date" title="your system date"></div>
		<div id="clock" title="your system time"></div>
		<div id="counter" title="click count"></div>
	</div>

	<div id="menu">
		<button id="reset" title="resets the count">⟲</button>
		<label title="makes the image slightly follow the cursor">follow cursor?<input type="checkbox" id="follow"></label>
		<label title="disables hue changing animation">disable hue?<span class="tooltip">?</span><input type="checkbox" id="hue-toggle"></label>
		<button id="close" title="closes this menu">✕</button>
	</div>

	<img id="explosion-gif" src="index_files/explosion-boom.gif" alt="explosion">

	<script>
		const audioReset = new Audio('./index_files/explode.wav');

		function updateClock(){
			const n=new Date();
			document.getElementById('clock').textContent=
				String(n.getHours()).padStart(2,'0')+':'+
				String(n.getMinutes()).padStart(2,'0')+':'+
				String(n.getSeconds()).padStart(2,'0');
			document.getElementById('date').textContent=n.toLocaleDateString();
		}
		setInterval(updateClock,1000); updateClock();

		const img=document.getElementById('slime');
		const counter=document.getElementById('counter');
		const menu=document.getElementById('menu');
		const resetBtn=document.getElementById('reset');
		const followToggle=document.getElementById('follow');
		const hueToggle=document.getElementById('hue-toggle');
		const closeBtn=document.getElementById('close');
		const explosion = document.getElementById('explosion-gif');
		const textContainer = document.getElementById('text-container');

		let clicks=Number(localStorage.getItem('slimeClicks'))||0;
		let activated=false;
		let followCursor=localStorage.getItem('followCursor')==='true';
		let hueOff=localStorage.getItem('hueOff')==='true';
		let resetPending=false;
		let resetTimeout=null;

		followToggle.checked=followCursor;
		hueToggle.checked=hueOff;
		if(hueOff) img.classList.remove('hue-anim');

		function showUI(){
			if(!activated){ 
				activated=true; 
				counter.style.opacity=1; 
			}
			menu.classList.add('show');
		}

		function updateCounter(){ counter.textContent=clicks; localStorage.setItem('slimeClicks',clicks); }

		function positionTextContainer(){
			const imgRect = img.getBoundingClientRect();
			const bottomOffset = 40; 
			const centerY = imgRect.bottom - bottomOffset;
			textContainer.style.top = centerY + 'px';
		}
		window.addEventListener('resize', positionTextContainer);
		positionTextContainer(); 

		img.tabIndex=0;
		img.addEventListener('mousedown',()=>{ img.style.transform='translateY(-45px) scale(0.9)'; });
		img.addEventListener('mouseup',()=>{ img.style.transform='translateY(-45px) scale(1)'; });

		img.addEventListener('click',e=>{
			showUI();
			clicks++;
			updateCounter();
			const plus=document.createElement('div');
			plus.className='plusone';
			plus.textContent='+1';
			document.body.appendChild(plus);
			plus.style.left=(e.clientX)+'px';
			plus.style.top=(e.clientY-20)+'px';
			setTimeout(()=>plus.remove(),1000);

			img.style.transition='transform 0.2s ease-out';
			img.style.transform='translateY(-45px) scale(1)';

			if(!hueOff) img.classList.add('hue-anim');
		});
		img.addEventListener('keydown',e=>{if(e.key===' '||e.key==='Enter'){e.preventDefault();img.click();}});

		resetBtn.addEventListener('click',e=>{
			e.stopPropagation();
			if(!resetPending){
				resetPending=true;
				resetBtn.style.background='#ff5a52';
				resetBtn.style.borderColor='#ff5a52';
				resetBtn.classList.add('shake');
				resetTimeout = setTimeout(()=>{
					resetPending=false;
					resetBtn.style.background='none';
					resetBtn.style.borderColor='#525252';
					resetBtn.classList.remove('shake');
				},3000);
			} else {
				clicks=0;
				updateCounter();
				resetPending=false;
				clearTimeout(resetTimeout);
				resetBtn.style.background='none';
				resetBtn.style.borderColor='#525252';
				resetBtn.classList.remove('shake');
				audioReset.play();

				const rect = counter.getBoundingClientRect();
				const clockRect = document.getElementById('clock').getBoundingClientRect();
				explosion.style.display='block';
				explosion.style.left=(rect.left + rect.width/2)+'px';
				explosion.style.top=(rect.top - 20)+'px';
				explosion.style.width=(clockRect.width*0.85)+'px';
				explosion.style.height=(rect.height*3)+'px';
				setTimeout(()=>{explosion.style.display='none';},1000);
			}
		});

		document.addEventListener('click',()=>{
			if(resetPending){
				resetPending=false;
				clearTimeout(resetTimeout);
				resetBtn.style.background='none';
				resetBtn.style.borderColor='#525252';
				resetBtn.classList.remove('shake');
			}
		});

		followToggle.addEventListener('change',()=>{
			followCursor=followToggle.checked;
			localStorage.setItem('followCursor',followCursor);
			if(!followCursor) img.style.transform='translateY(-45px) scale(1)';
		});
		hueToggle.addEventListener('change',()=>{
			hueOff=hueToggle.checked;
			localStorage.setItem('hueOff',hueOff);
			if(hueOff) img.classList.remove('hue-anim');
			else if(activated) img.classList.add('hue-anim');
		});

		closeBtn.addEventListener('mousedown',()=>{ closeBtn.style.background='yellow'; closeBtn.style.color='black'; });
		closeBtn.addEventListener('mouseup',()=>{ closeBtn.style.background='none'; closeBtn.style.color='white'; });
		closeBtn.addEventListener('mouseleave',()=>{ closeBtn.style.background='none'; closeBtn.style.color='white'; });
		closeBtn.addEventListener('click',()=>{ menu.classList.remove('show'); });

		document.addEventListener('mousemove',e=>{
			if(!followCursor) return;
			const x=(e.clientX/window.innerWidth-0.5)*60;
			const y=(e.clientY/window.innerHeight-0.5)*60 - 45;
			img.style.transform=`translateY(${y}px) translateX(${x}px) scale(1)`;
		});
		document.addEventListener('mouseleave',()=>{ if(followCursor) img.style.transform='translateY(-45px) translateX(0) scale(1)'; });

		function addHoldEffect(button,color){
			button.addEventListener('mousedown',()=>{ button.style.background=color; });
			button.addEventListener('mouseup',()=>{ if(!resetPending) button.style.background='none'; });
			button.addEventListener('mouseleave',()=>{ if(!resetPending) button.style.background='none'; });
		}
		addHoldEffect(resetBtn,'#ff5a52');
		addHoldEffect(closeBtn,'#ffff55');

		updateCounter();
	</script>
</body>
</html>
